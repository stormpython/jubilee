<!DOCTYPE html>
<html>
  <head>
    <title></title>
    <style>
      body {
        font: 10px sans-serif;
      }

      .axis path,
      .axis line {
        fill: none;
        stroke: #000;
        shape-rendering: crispEdges;
      }
    </style>
  </head>
  <body>
    <div id="chart"></div>

    <script data-main="../../src/require.config.js"
            src="../../node_modules/requirejs/require.js"></script>
    <script>
      require(["../../src/index"], function (jubilee) {
        var data = {
          series: [
            [
              { x: 1411761450000, y: 41, label: "band", z: 10},
              { x: 1411761480000, y: 18, label: "band", z: 13},
              { x: 1411761510000, y: 22, label: "band", z: 24},
              { x: 1411761540000, y: 17, label: "band", z: 36},
              { x: 1411761570000, y: 17, label: "band", z: 29},
              { x: 1411761600000, y: 25, label: "band", z: 29}
            ],
            [
              { x: 1411761450000, y: 91, label: "of", z: 10},
              { x: 1411761480000, y: 88, label: "of", z: 45},
              { x: 1411761510000, y: 38, label: "of", z: 13},
              { x: 1411761540000, y: 47, label: "of", z: 24},
              { x: 1411761570000, y: 57, label: "of", z: 90},
              { x: 1411761600000, y: 97, label: "of", z: 90}
            ],
            [
              { x: 1411761450000, y: 191, label: "brothers", z: 27},
              { x: 1411761480000, y: 188, label: "brothers", z: 93},
              { x: 1411761510000, y: 12, label: "brothers", z: 45},
              { x: 1411761540000, y: 17, label: "brothers", z: 39},
              { x: 1411761570000, y: 17, label: "brothers", z: 67},
              { x: 1411761600000, y: 197, label: "brothers", z: 90}
            ]
          ]
        };

        var clickFunction = function (e, d, i) { console.log(e, d, i); };
        var brushFunction = function (brush) { console.log(brush.extent()); };
        var color = d3.scale.category10(["band", "of", "brothers"]);
        var barColorScale = d3.scale.category20c(["band", "of", "brothers"]);

        // D3 selection
        var selection = d3.select("#chart").datum(data.series);

        // Example normal area chart configuration
        var myChart = jubilee.chart.series()
          .width(700)
          .height(400)
          .yScale({ nice: true })
          .zScale({ nice: true })
          .zAxis({ show: true })
//          .area({
//            interpolate: "basis",
//            properties: {
//              fill: function (d) {
//                var point = d.slice(0,1).pop();
//                return color(point.label);
//              },
//              stroke: function (d) {
//                var point = d.slice(0,1).pop();
//                return color(point.label);
//              },
//              opacity: 0.5
//            }
//          })
//          .points([
//            {
//              class: "points",
//              radius: 5,
//              properties: {
//                fill: "#ffffff",
//                stroke: function (d, i) { return color(d.label); },
//                strokeWidth: 3
//              }
//            },
//            {
//              class: "points",
//              scale: "z",
//              radius: 5,
//              properties: {
//                fill: "#ffffff",
//                stroke: function () { return "#000000"; },
//                strokeWidth: 3
//              }
//            }
//          ])
          .bar({
            group: true,
            padding: 0.1,
            interval: "30s",
            properties: {
              class: "bars",
              fill: function (d) { return barColorScale(d.label); }
            }
          })
          .line({
            scale: "z",
            properties: {
              stroke: function (d) {
                var point = d.slice(0,1).pop();
                return color(point.label);
              }
            }
          })
          .on("click", clickFunction)
          .on("brushend", brushFunction);

        selection.call(myChart);
      });
    </script>
  </body>
</html>
